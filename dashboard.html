<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>لوحة التحكم - نظام تسجيل يوميات EXO</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
  <div class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-4 flex justify-between items-center shadow-md">
      <h1 class="text-xl font-bold">نظام تسجيل يوميات EXO</h1>
      <div class="flex items-center space-x-4 space-x-reverse">
        <span id="userWelcome" class="font-medium">مرحباً</span>
        <button id="adminPanelBtn" class="btn-secondary">لوحة المدير</button>
        <button id="signOutBtn" class="btn-danger">تسجيل الخروج</button>
      </div>
    </header>

    <!-- Main content -->
    <main class="flex-1 container mx-auto p-4 md:p-6">
      <div class="tabs">
        <!-- Navigation Tabs -->
        <nav class="flex space-x-2 space-x-reverse border-b border-gray-200 mb-4">
          <a href="#" class="nav-link active" data-tab="report">تسجيل تقرير</a>
          <a href="#" class="nav-link" data-tab="history">السجل</a>
          <a href="#" class="nav-link" data-tab="admin">الإدارة</a>
        </nav>

        <!-- Report Tab -->
        <section id="reportTab" class="tab-content">
          <form id="reportForm" class="section-card p-6 space-y-4">
            <h2 class="text-lg font-bold text-gray-800 mb-4">تسجيل تقرير جديد</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="reportDate" class="block text-sm font-semibold text-gray-700 mb-2">التاريخ</label>
                <input type="date" id="reportDate" required class="input-field w-full">
              </div>
              <div>
                <label for="projectName" class="block text-sm font-semibold text-gray-700 mb-2">المشروع</label>
                <select id="projectName" required class="input-field w-full">
                  <option value="" disabled selected>اختر المشروع</option>
                </select>
              </div>
              <div>
                <label for="projectPhase" class="block text-sm font-semibold text-gray-700 mb-2">المرحلة</label>
                <select id="projectPhase" required class="input-field w-full">
                  <option value="" disabled selected>اختر المرحلة</option>
                </select>
              </div>
              <div>
                <label for="itemType" class="block text-sm font-semibold text-gray-700 mb-2">نوع البند</label>
                <select id="itemType" required class="input-field w-full">
                  <option value="" disabled selected>اختر نوع البند</option>
                  <option value="مواد">مواد</option>
                  <option value="عمالة">عمالة</option>
                  <option value="مقاول">مقاول</option>
                </select>
              </div>
            </div>

            <!-- Sections for each item type -->
            <div id="materialsSection" class="hidden">
              <label for="materialName" class="block text-sm font-semibold text-gray-700 mb-2">اسم المادة</label>
              <select id="materialName" class="input-field w-full">
                <option value="" disabled selected>اختر المادة</option>
              </select>
              <label for="materialUnit" class="block text-sm font-semibold text-gray-700 mt-4 mb-2">الوحدة</label>
              <input type="text" id="materialUnit" class="input-field w-full" readonly>
            </div>

            <div id="workersSection" class="hidden">
              <label for="workerName" class="block text-sm font-semibold text-gray-700 mb-2">اسم العامل</label>
              <select id="workerName" class="input-field w-full">
                <option value="" disabled selected>اختر العامل</option>
              </select>
              <label for="workerUnit" class="block text-sm font-semibold text-gray-700 mt-4 mb-2">الوحدة</label>
              <input type="text" id="workerUnit" class="input-field w-full" readonly>
            </div>

            <div id="contractorsSection" class="hidden">
              <label for="contractorName" class="block text-sm font-semibold text-gray-700 mb-2">اسم المقاول</label>
              <select id="contractorName" class="input-field w-full">
                <option value="" disabled selected>اختر المقاول</option>
              </select>
              <label for="contractorUnit" class="block text-sm font-semibold text-gray-700 mt-4 mb-2">الوحدة</label>
              <input type="text" id="contractorUnit" class="input-field w-full" readonly>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
              <div>
                <label for="quantity" class="block text-sm font-semibold text-gray-700 mb-2">الكمية</label>
                <input type="number" id="quantity" required class="input-field w-full">
              </div>
              <div>
                <label for="costPerUnit" class="block text-sm font-semibold text-gray-700 mb-2">التكلفة الفردية (ريال)</label>
                <input type="number" id="costPerUnit" required class="input-field w-full">
              </div>
            </div>

            <div>
              <label for="itemDescription" class="block text-sm font-semibold text-gray-700 mb-2">الوصف (اختياري)</label>
              <textarea id="itemDescription" class="input-field w-full"></textarea>
            </div>

            <button type="submit" class="btn-primary w-full py-3">إرسال التقرير</button>
          </form>
        </section>

        <!-- History Tab -->
        <section id="historyTab" class="tab-content hidden">
          <h2 class="text-lg font-bold text-gray-800 mb-4">سجل التقارير السابقة</h2>
          <div id="reportsHistory"></div>
        </section>

        <!-- Admin Tab -->
        <section id="adminTab" class="tab-content hidden">
          <div class="space-y-6">
            <!-- Add Project -->
            <div class="glass-effect p-6 rounded-lg">
              <h3 class="text-xl font-bold text-gray-800 mb-4">إضافة مشروع جديد</h3>
              <form id="addProjectForm" class="space-y-4">
                <div>
                  <label for="projectNameInput" class="block text-sm font-semibold text-gray-700 mb-2">اسم المشروع</label>
                  <input type="text" id="projectNameInput" required class="input-field w-full">
                </div>
                <div>
                  <label for="projectPhasesInput" class="block text-sm font-semibold text-gray-700 mb-2">المراحل (افصل بينها بفواصل)</label>
                  <input type="text" id="projectPhasesInput" required class="input-field w-full">
                </div>
                <button type="submit" class="btn-primary w-full">إضافة المشروع</button>
              </form>
            </div>

            <!-- Add Phase -->
            <div class="glass-effect p-6 rounded-lg">
              <h3 class="text-xl font-bold text-gray-800 mb-4">إضافة مرحلة جديدة لمشروع</h3>
              <form id="addPhaseForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label for="phaseProjectSelect" class="block text-sm font-semibold text-gray-700 mb-2">اختر المشروع</label>
                    <select id="phaseProjectSelect" required class="input-field w-full">
                      <option value="" disabled selected>اختر المشروع</option>
                    </select>
                  </div>
                  <div>
                    <label for="newPhaseName" class="block text-sm font-semibold text-gray-700 mb-2">اسم المرحلة</label>
                    <input type="text" id="newPhaseName" required class="input-field w-full" placeholder="أدخل اسم المرحلة">
                  </div>
                </div>
                <button type="submit" class="btn-primary w-full">إضافة المرحلة</button>
              </form>
            </div>

            <!-- Manage Projects -->
            <div class="glass-effect p-6 rounded-lg">
              <h3 class="text-xl font-bold text-gray-800 mb-4">إدارة المشاريع</h3>
              <div id="projectsList" class="space-y-2"></div>
            </div>

            <!-- Manage Materials -->
            <div class="glass-effect p-6 rounded-lg">
              <h3 class="text-xl font-bold text-gray-800 mb-4">إدارة المواد</h3>
              <form id="adminForm" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <select id="adminItemType" class="input-field" required>
                  <option value="مواد">مواد</option>
                  <option value="عمالة">عمالة</option>
                  <option value="مقاول">مقاول</option>
                </select>
                <input type="text" id="adminItemName" placeholder="الاسم" required class="input-field">
                <input type="text" id="adminItemUnit" placeholder="الوحدة" required class="input-field">
                <button type="submit" class="btn-primary md:col-span-3">إضافة</button>
              </form>
              <div id="materialsList" class="space-y-2"></div>
            </div>

            <!-- Manage Workers/Contractors -->
            <div class="glass-effect p-6 rounded-lg">
              <h3 class="text-xl font-bold text-gray-800 mb-4">إدارة العمالة / المقاولين</h3>
              <div id="workersContractorsList" class="space-y-2"></div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- Message Modal -->
  <div id="messageBox" class="fixed inset-0 modal-backdrop hidden items-center justify-center p-4">
    <div class="modal-content p-6 shadow-xl w-full max-w-sm text-center">
      <p id="messageText" class="text-gray-800 font-medium mb-4">رسالة النظام تظهر هنا</p>
      <button id="closeMessageBtn" class="w-full py-2 px-4 btn-primary text-sm font-medium">إغلاق</button>
    </div>
  </div>

  <script type="module" src="dashboard.js"></script>
</body>
</html>
